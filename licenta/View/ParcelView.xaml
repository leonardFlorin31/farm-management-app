<UserControl x:Class="licenta.View.ParcelView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:licenta.View"
             xmlns:viewModel="clr-namespace:licenta.ViewModel"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.Resources>
        <!-- Custom ToggleButton for ComboBox -->
        <ControlTemplate x:Key="CustomToggleButton" TargetType="ToggleButton">
            <Grid>
                <Border Name="Border" Background="White" BorderBrush="Black" BorderThickness="1" />
                <Grid>
                    <ContentPresenter HorizontalAlignment="Left" Margin="5,0,25,0" VerticalAlignment="Center"/>
                    <Path Name="Arrow" Fill="Black"
                          Data="M 0 0 L 4 4 L 8 0 Z"
                          HorizontalAlignment="Right"
                          VerticalAlignment="Center"
                          Margin="0,0,5,0"/>
                </Grid>
            </Grid>
        </ControlTemplate>

        <!-- Custom ComboBox Style -->
        <Style TargetType="{x:Type ComboBox}">
            <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True" />
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton Name="DropDownToggle"
                                          ClickMode="Press"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          Template="{StaticResource CustomToggleButton}" />
                            <ContentPresenter Name="ContentSite"
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left"
                                              Margin="5,0,0,0" />
                            <Popup Name="Popup"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   Placement="Bottom"
                                   AllowsTransparency="True"
                                   PopupAnimation="Slide">
                                <Border BorderBrush="{TemplateBinding BorderBrush}" Background="White">
                                    <ScrollViewer>
                                        <ItemsPresenter />
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Input Section -->
        <DockPanel Grid.Row="0" Margin="10">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                <StackPanel Margin="5, 5, 0, 5">
                    <TextBlock Text="Select Option"/>
                    <ComboBox Width="100"
                              ItemsSource="{Binding Options}"
                              SelectedItem="{Binding SelectedOption, Mode=TwoWay}"
                              Style="{StaticResource {x:Type ComboBox}}"/>
                </StackPanel>

                <StackPanel Margin="0, 5, 0, 5">
                    <TextBlock Text="{Binding Label1}" />
                    <TextBox Width="100" BorderThickness="2" BorderBrush="{StaticResource titleColor2}" Text="{Binding Field1, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
                <StackPanel Margin="0, 5, 0, 5">
                    <TextBlock Text="{Binding Label2}" />
                    <TextBox Width="100" BorderThickness="2" BorderBrush="{StaticResource titleColor2}" Text="{Binding Field2, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
                <StackPanel Margin="0, 5, 0, 5">
                    <TextBlock Text="{Binding Label3}" />
                    <TextBox Width="100" BorderThickness="2" BorderBrush="{StaticResource titleColor2}" Text="{Binding Field3, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
                <StackPanel Margin="0, 5, 0, 5">
                    <TextBlock Text="{Binding Label4}" />
                    <TextBox Width="100" BorderThickness="2" BorderBrush="{StaticResource titleColor2}" Text="{Binding Field4, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
            </StackPanel>

            <Button Content="Save"
                    Width="80"
                    DockPanel.Dock="Right"
                    Margin="10" 
                    Padding="5"
                    Background="Black" 
                    Foreground="White" 
                    BorderBrush="Transparent" 
                    FontWeight="Bold"
                    Command="{Binding SaveCommand}" />
        </DockPanel>

        <!-- Search Box -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="10,5,10,5">
            <StackPanel>
                <TextBlock Text="Optiuni" />
                <TextBox Width="120" Margin="0, 5, 0 ,0"  Text="{Binding SearchOption, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
            <StackPanel>
                <TextBlock Text="{Binding Label1}" Margin="35, 0, 0 ,0" />
                <TextBox Width="120" Margin="35, 5, 0 ,0"  Text="{Binding SearchField1, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
            <StackPanel>
                <TextBlock Text="{Binding Label2}" Margin="30, 0, 0 ,0" />
                <TextBox Width="120" Margin="30, 5, 0 ,0"  Text="{Binding SearchField2, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
            <StackPanel>
                <TextBlock Text="{Binding Label3}" Margin="28, 0, 0 ,0" />
                <TextBox Width="120" Margin="28, 5, 0 ,0"  Text="{Binding SearchField3, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
            <StackPanel>
                <TextBlock Text="{Binding Label4}" Margin="32, 0, 0 ,0"/>
                <TextBox Width="120" Margin="32, 5, 0 ,0"  Text="{Binding SearchField4, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>
        </StackPanel>

        <!-- List of Parcels -->
        <ListView Grid.Row="2"
                  ItemsSource="{Binding SavedParcels}"
                  Margin="10,0,10,10">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="150">
                        <GridViewColumn.Header>
                            <StackPanel>
                                <TextBlock Text="Optiuni" FontWeight="Bold"/>
                                <TextBlock Text="Animale" FontSize="12" Margin="0,5, 0, 5"/>
                                <TextBlock Text="Grane" FontSize="12"/>
                            </StackPanel>
                        </GridViewColumn.Header>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Option}" Width="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Width="150">
                        <GridViewColumn.Header>
                            <StackPanel>
                                <TextBlock Text="Field1" FontWeight="Bold"/>
                                <TextBlock Text="Denumire" FontSize="12" Margin="0,5, 0, 5"/>
                                <TextBlock Text="Denumire" FontSize="12"/>
                            </StackPanel>
                        </GridViewColumn.Header>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Field1}" Width="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    
                    <GridViewColumn Width="150">
                        <GridViewColumn.Header>
                            <StackPanel>
                                <TextBlock Text="Field2" FontWeight="Bold"/>
                                <TextBlock Text="LabelA2" FontSize="12" Margin="0,5, 0, 5"/>
                                <TextBlock Text="LabelB2" FontSize="12"/>
                            </StackPanel>
                        </GridViewColumn.Header>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Field2}" Width="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Width="150">
                        <GridViewColumn.Header>
                            <StackPanel>
                                <TextBlock Text="Field3" FontWeight="Bold"/>
                                <TextBlock Text="LabelA3" FontSize="12" Margin="0,5, 0, 5"/>
                                <TextBlock Text="LabelB3" FontSize="12"/>
                            </StackPanel>
                        </GridViewColumn.Header>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Field3}" Width="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    
                    <GridViewColumn Width="150">
                        <GridViewColumn.Header>
                            <StackPanel>
                                <TextBlock Text="Field4" FontWeight="Bold"/>
                                <TextBlock Text="LabelA4" FontSize="12" Margin="0,5, 0, 5"/>
                                <TextBlock Text="LabelB4" FontSize="12"/>
                            </StackPanel>
                        </GridViewColumn.Header>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Field4}" Width="100"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</UserControl>

<!-- <UserControl.Resources> -->
<!--         ~1~ Custom ToggleButton for ComboBox @1@ -->
<!--         <ControlTemplate x:Key="CustomToggleButton" TargetType="ToggleButton"> -->
<!--             <Grid> -->
<!--                 <Border Name="Border" Background="White" BorderBrush="Black" BorderThickness="1" /> -->
<!--          -->
<!--                 ~1~ StackPanel for Content and Arrow @1@ -->
<!--                 <Grid> -->
<!--                     ~1~ ContentPresenter to display the selected item @1@ -->
<!--                     <ContentPresenter HorizontalAlignment="Left" Margin="5,0,25,0" VerticalAlignment="Center"/> -->
<!--              -->
<!--                     ~1~ Arrow on the right @1@ -->
<!--                     <Path Name="Arrow" Fill="Black" -->
<!--                           Data="M 0 0 L 4 4 L 8 0 Z" -->
<!--                           HorizontalAlignment="Right" -->
<!--                           VerticalAlignment="Center" -->
<!--                           Margin="0,0,5,0"/> -->
<!--                 </Grid> -->
<!--             </Grid> -->
<!--         </ControlTemplate> -->
<!-- -->
<!--         ~1~ Custom ComboBox Style @1@ -->
<!--         <Style TargetType="{x:Type ComboBox}"> -->
<!--             <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True" /> -->
<!--             <Setter Property="Background" Value="White"/> -->
<!--             <Setter Property="Foreground" Value="Black"/> -->
<!--             <Setter Property="FontSize" Value="16"/> -->
<!--             <Setter Property="BorderBrush" Value="Black"/> -->
<!--             <Setter Property="Padding" Value="4"/> -->
<!--             <Setter Property="Control.Template"> -->
<!--                 <Setter.Value> -->
<!--                     <ControlTemplate TargetType="ComboBox"> -->
<!--                         <Grid> -->
<!--                             ~1~ ToggleButton controls dropdown opening @1@ -->
<!--                             <ToggleButton Name="DropDownToggle" -->
<!--                                           ClickMode="Press" -->
<!--                                           IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" -->
<!--                                           Template="{StaticResource CustomToggleButton}" /> -->
<!--                              -->
<!--                             ~1~ Displays Selected Item @1@ -->
<!--                             <ContentPresenter Name="ContentSite" -->
<!--                                               Content="{TemplateBinding SelectionBoxItem}" -->
<!--                                               VerticalAlignment="Center" -->
<!--                                               HorizontalAlignment="Left" -->
<!--                                               Margin="5,0,0,0" /> -->
<!--                              -->
<!--                             ~1~ Popup Dropdown @1@ -->
<!--                             <Popup Name="Popup" -->
<!--                                    IsOpen="{TemplateBinding IsDropDownOpen}" -->
<!--                                    Placement="Bottom" -->
<!--                                    AllowsTransparency="True" -->
<!--                                    PopupAnimation="Slide"> -->
<!--                                 <Border BorderBrush="{TemplateBinding BorderBrush}" Background="White"> -->
<!--                                     <ScrollViewer> -->
<!--                                         <ItemsPresenter /> -->
<!--                                     </ScrollViewer> -->
<!--                                 </Border> -->
<!--                             </Popup> -->
<!--                         </Grid> -->
<!--                     </ControlTemplate> -->
<!--                 </Setter.Value> -->
<!--             </Setter> -->
<!--         </Style> -->
<!--     </UserControl.Resources> -->
<!-- -->
<!-- -->

<!-- </StackPanel> -->